<a href="../../../ja/todo/archive/20260220.md">
  <img alt="Read in Japanese" src="https://img.shields.io/badge/docs-日本語-2563EB?style=flat-square">
</a>

# TODO History (2026-02-20)

## 2026-02-20 Completed: Immediate highest priority

1. Removed unused symbols step by step.
- Built candidate list from `src/py2cpp.py` and `src/runtime/cpp/pytra/built_in/py_runtime.h`.
- Classified via `rg` into unused symbols and thin wrappers replaceable by direct forms.
- Removed identified symbols and simplified profile/runtime-map loaders.
- Verified with `python3 tools/check_py2cpp_transpile.py` (`checked=103 ok=103 fail=0 skipped=5`).
- Committed in small units for rollback safety.
- Confirmed no missing public API docs entries for removed symbols.
2. Added purpose comments to classes/functions in `src/runtime/cpp/pytra/built_in/py_runtime.h`.

## 2026-02-20 Completed: `spec-import` alignment (top priority)

1. Aligned supported phase-1 import forms with implementation.
- Supported: `import M`, `import M as A`, `from M import S`, `from M import S as A`.
- Unsupported (`from M import *`, relative import) unified as `input_invalid(kind=unsupported_import_form)`.
2. Introduced `ImportBinding` as canonical import model.
3. Unified module resolution via `resolve_module_name(raw_name, root_dir)`.
4. Added `ExportTable` validation for `from M import S`.
5. Fixed name-resolution priority and collision handling (`duplicate_binding`).
6. Unified C++ generation to fully qualified names.
7. Enforced same `module_namespace_map` for single-file and multi-file.
8. Unified import error detail format (`kind`, `file`, `import`).
9. Added minimal import acceptance matrix tests.
10. Added language-agnostic import IR groundwork (`QualifiedSymbolRef`).

## 2026-02-20 Completed: `todo2`-aligned tasks

Completed items included:
- Generic `math` generation flow in `py2cpp.py`
- Runtime generation verification (`--emit-runtime-cpp`)
- Python/C++ parity checks for extended math cases
- Module-attribute resolution unification
- Removal of hardcoded png/gif generation branches
- Selfhost-convertible updates in `sys.py` / `typing.py`
- Layout and naming cleanups across runtime/hook paths
- Runtime include/path standardization and docs sync

## 2026-02-20 Completed: Import-resolution priority queue

Completed items included:
- Import/from-import collection and dependency graph (`--dump-deps`)
- Path resolution, duplicate detection, and cycle detection
- Runtime include-path and import normalization synchronization
- Multi-file import checks in gate path
- Hook-side hardcoded branch removal in favor of runtime-call + module-attr map

## 2026-02-20 Migration: `enum` support (completed)

1. Added `pytra.std.enum` with minimal `Enum` / `IntEnum` / `IntFlag` compatibility.
2. Added EAST handling for enum class-member syntax (`NAME = expr`).
3. Added C++ lowering for enum families and IntFlag bitwise helpers.
4. Added runtime-parity fixtures.
5. Updated documentation.

## Transpiler functionality TODO (deficiency cleanup at that time)

All listed items were completed:
- Full `AugAssign` family
- Exponent `**` lowering
- `bytearray`/`bytes` compatibility improvements
- `list.pop()` and `list.pop(index)` support
- Expanded `math` compatibility
- GIF runtime formalization and tests

## Additional TODO found while building samples (05-14)

Historical completed notes retained in archive:
- Follow-up tasks discovered during sample expansion and solved incrementally.

## Additional items from `sample/py` runtime parity

Historical completed notes retained in archive:
- Runtime parity findings and fixes were tracked and closed.

## TODO found when adding `sample/py/15`

Historical completed notes retained in archive:
- Converter-side gaps discovered by sample 15 were logged and addressed.

## Candidate simplifications in `sample/py`

Historical notes retained:
- Candidate simplifications around Python built-ins were tracked as follow-up work.

## Additional TODO for Go/Java native conversion

Historical notes retained for later migration phases.

## Additional TODO for Rust

Historical notes retained for later migration phases.

## Cross-language runtime standardization TODO

Historical notes retained for runtime layout unification.

## EAST / CppEmitter simplification TODO

Historical notes retained for staged simplification planning.

## On hold (Go/Java frozen until EAST migration)

Historical freeze policy retained in archive context.

## EAST C++ readability improvement TODO

Historical notes retained for readability-focused follow-up.

## EAST `py2cpp` sample support TODO (completed)

All listed sample-support items were completed.

## self_hosted AST/Parser phased migration TODO

Historical phased-migration notes retained in archive.

## Highest priority (added 2026-02-20: reflected `todo2` priority)

Historical snapshot checklist was marked complete in this archive.

## Highest priority (added 2026-02-20: `py2cpp` codegen issues)

Historical snapshot checklist was marked complete in this archive.
