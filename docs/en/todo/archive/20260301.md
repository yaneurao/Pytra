# TODO History (2026-03-01)

<a href="../../../ja/todo/archive/20260301.md">
  <img alt="Read in Japanese" src="https://img.shields.io/badge/docs-日本語-2563EB?style=flat-square">
</a>

## 2026-03-01 Migration: `P0: Complete Removal of perf_counter-Specific Branches in core.py (Regression Fix)`

The following items were moved from `docs/ja/todo/index.md` to `todo/archive`.

Context: [docs/ja/plans/p0-stdlib-signature-source-of-truth.md](../plans/p0-stdlib-signature-source-of-truth.md)

1. [x] [ID: P0-STDLIB-SOT-02] Remove direct branch `fn_name == "perf_counter"` from `core.py` and unify via stdlib signature reference layer.
2. [x] [ID: P0-STDLIB-SOT-02-S1-01] Remove `perf_counter` string dependency from `core.py`, and move `BuiltinCall` judgment to import-resolution data or common resolver.
3. [x] [ID: P0-STDLIB-SOT-02-S1-02] Add regression to `test_east_core.py` to prevent reintroduction of direct `perf_counter` hardcoding into `core.py`.
4. [x] [ID: P0-STDLIB-SOT-02-S2-01] Re-run `test_py2cpp_codegen_issues.py` / `check_py2cpp_transpile.py` and confirm non-regression in `perf_counter` type inference and C++ output.

## 2026-03-01 Migration: `P0: Strengthen sample/18 C++ Output Optimization (Runtime Hot Paths)`

The following items were moved from `docs/ja/todo/index.md` to `todo/archive`.

Context: [docs/ja/plans/p0-sample18-cpp-optimization-strengthening.md](../plans/p0-sample18-cpp-optimization-strengthening.md)

1. [x] [ID: P0-CPP-S18-OPT-01] Implement 6 hot-path items for sample/18 C++ in stages (typed enumerate / typed container / parser access / enum tag / number predecode / typed execute loop).
2. [x] [ID: P0-CPP-S18-OPT-01-S1-01] Design typed-tuple iteration conditions for `enumerate(lines)` and fix EAST3->C++ output contract.
3. [x] [ID: P0-CPP-S18-OPT-01-S1-02] Regression-lock typed loop-header output in tokenize loop without `object` + `py_at`.
4. [x] [ID: P0-CPP-S18-OPT-01-S2-01] Identify conditions where `tokens` degrade to `object(list<object>)` and define type-information retention path.
5. [x] [ID: P0-CPP-S18-OPT-01-S2-02] Migrate `tokenize`/`Parser` tokens to typed-container output and reduce boxing.
6. [x] [ID: P0-CPP-S18-OPT-01-S3-01] Inventory repeated token access in `Parser` and finalize common token-cache policy.
7. [x] [ID: P0-CPP-S18-OPT-01-S3-02] Remove duplicate `py_at + obj_to_rc_or_raise` for same index in `peek_kind/expect/parse_primary`.
8. [x] [ID: P0-CPP-S18-OPT-01-S4-01] Convert string comparison sites for `ExprNode.kind` / `StmtNode.kind` / `op` into enum/integer-tag policy.
9. [x] [ID: P0-CPP-S18-OPT-01-S4-02] Migrate C++ output to tag-based branches and reduce `if (node->kind == "...")` chains.
10. [x] [ID: P0-CPP-S18-OPT-01-S5-01] Finalize spec to shift `py_to_int64` path for `NUMBER` tokens to lexical-stage predecode.
11. [x] [ID: P0-CPP-S18-OPT-01-S5-02] Use token numeric fields and reduce string->number conversion in `parse_primary`.
12. [x] [ID: P0-CPP-S18-OPT-01-S6-01] Finalize return-type consistency of `parse_program` to enable typed statement iteration in `execute`.
13. [x] [ID: P0-CPP-S18-OPT-01-S6-02] Replace `for (object ... : py_dyn_range(stmts))` with typed iteration and remove loop-body `obj_to_rc_or_raise`.
14. [x] [ID: P0-CPP-S18-OPT-01-S7-01] Lock regenerated diff of `sample/18` (6 items) with golden regressions.
15. [x] [ID: P0-CPP-S18-OPT-01-S7-02] Confirm non-regression with `check_py2cpp_transpile.py` / unit tests / sample execution.
- `P0-CPP-S18-OPT-01-S1-01` implemented contract in `CppStatementEmitter` to return `enumerate(list[str])` to typed enumerate via `py_to_str_list_from_object(...)` even in `pyobj` mode.
- `P0-CPP-S18-OPT-01-S1-02` added sample/18 regression (`for (const auto& [line_index, source] : ... )`) to `test_py2cpp_codegen_issues.py`, confirming regenerated `sample/cpp/18_mini_language_interpreter.cpp` removes `object + py_at` chains.
- `P0-CPP-S18-OPT-01-S2-01` fixed in plan that under `cpp_list_model=pyobj`, list type maps to `object` (`_cpp_type_text`), and `tokens` are excluded from stack-list reduction because they pass through function returns + class fields.
- `P0-CPP-S18-OPT-01-S3-01` inventoried duplicate `py_at(this->tokens, this->pos)` in `Parser` (`peek_kind/expect/parse_primary`) and fixed implementation policy to have emitter synthesize helpers like `_current_token()` / `_previous_token()`.
- `P0-CPP-S18-OPT-01-S3-02` shifted `Parser` in sample/18 to `current_token()/previous_token()` references, reducing token fetch in C++ `expect` to one call and unifying `peek_kind` / `parse_primary` through helpers.
- `P0-CPP-S18-OPT-01-S4-01` inventoried current string comparisons (`node->kind` 4 places, `node->op` 4 places, `stmt->kind` 2 places), and fixed staged migration policy to co-locate `kind/op` as `uint8` tags and switch comparisons to integers.
- `P0-CPP-S18-OPT-01-S5-01` finalized spec where `NUMBER` is predecoded to `int64 number_value` at tokenize stage and `parse_primary` prefers `token_num->number_value` (default 0 for non-NUMBER).
- `P0-CPP-S18-OPT-01-S6-01` fixed consistency policy to steer `parse_program` return type to `list<rc<StmtNode>>` (boxing only on required boundaries) and defined the connection contract to typed loop on `execute` side.
- `P0-CPP-S18-OPT-01-S6-02` added runtime helper `py_to_rc_list_from_object<T>()` and ForCore emitter fastpath, replacing sample/18 `execute` loop with `for (rc<StmtNode> stmt : ...)` (removing loop-body `obj_to_rc_or_raise`).
- `P0-CPP-S18-OPT-01-S7-02` confirmed non-regression via `test_py2cpp_codegen_issues.py` (76), `test_east3_cpp_bridge.py` (90), `check_py2cpp_transpile.py` (`ok=134`), and `runtime_parity_check --case-root sample --targets cpp 18_mini_language_interpreter` (PASS).
- `P0-CPP-S18-OPT-01-S5-02` added `Token.number_value`, predecoding only NUMBER at tokenize stage, and updated `parse_primary` to use `token_num.number_value` directly (removed `py_to_int64(token_num->text)`).
- `P0-CPP-S18-OPT-01-S4-02` added `kind_tag/op_tag` to `ExprNode/StmtNode`, replaced eval/execute branches with integer comparisons, and reduced string-comparison chains (parity PASS, regression locked in `test_py2cpp_codegen_issues.py`).
- `P0-CPP-S18-OPT-01-S2-02` added emitter path that treats `list[RefClass]` as typed container even when `cpp_list_model=pyobj`, reducing `tokenize` return, `Parser.tokens`, and `parse_program`/`execute` args in sample/18 to `list<rc<...>>` (reduced `object + py_append/py_at` chains).
- `P0-CPP-S18-OPT-01-S7-01` added sample/18 typed-token-container regressions (`tokenize`/`Parser.tokens`/`current_token`) to `test_py2cpp_codegen_issues.py`, locking regenerated diffs of `sample/cpp/18_mini_language_interpreter.cpp`.
- `P0-CPP-S18-OPT-01` confirmed non-regression for all 6 items via unit 80 tests / `test_east3_cpp_bridge.py` 90 tests / `check_py2cpp_transpile.py` (`ok=134`) / `runtime_parity_check` (sample/18 cpp PASS), and marked the parent task complete.

## 2026-03-01 Migration: Completed Sections (3 items)

The following items were moved from `docs/ja/todo/index.md` to `todo/archive`.

### P1: Rust runtime externalization (remove inline helpers / embedded `mod pytra`)

Context: [docs/ja/plans/p1-rs-runtime-externalization.md](../plans/p1-rs-runtime-externalization.md)

1. [x] [ID: P1-RS-RUNTIME-EXT-01] Remove inline runtime/helper bodies from Rust backend generated code and unify to external runtime references.
2. [x] [ID: P1-RS-RUNTIME-EXT-01-S1-01] Finalize inventory of Rust emitter inline helper outputs and API mapping against source-of-truth `src/runtime/rs/pytra`.
3. [x] [ID: P1-RS-RUNTIME-EXT-01-S1-02] Finalize runtime-reference contract for Rust artifacts (`mod/use` structure and output-dir placement) and document fail-closed conditions.
4. [x] [ID: P1-RS-RUNTIME-EXT-01-S2-01] Fill missing helpers/APIs in `src/runtime/rs/pytra` to provide semantics equivalent to inline implementations.
5. [x] [ID: P1-RS-RUNTIME-EXT-01-S2-02] Add runtime-file placement path to `py2rs.py`, moving generated code to a state where external runtime is resolvable.
6. [x] [ID: P1-RS-RUNTIME-EXT-01-S2-03] Remove runtime/helper body output from `rs_emitter.py` and switch to runtime API calls only.
7. [x] [ID: P1-RS-RUNTIME-EXT-01-S3-01] Update `check_py2rs_transpile` / Rust smoke / parity and lock regressions.
8. [x] [ID: P1-RS-RUNTIME-EXT-01-S3-02] Regenerate `sample/rs` and confirm zero inline helper residue.
- `P1-RS-RUNTIME-EXT-01-S1-01` inventoried inline outputs of `RUST_RUNTIME_SUPPORT` / `_emit_pyany_runtime` / `_emit_isinstance_runtime_helpers`, and fixed API mapping gaps with `src/runtime/rs/pytra/built_in/py_runtime.rs` (missing: `py_str_at`/`py_slice_str`/`mod time|math|pytra`/`PyAny`/`isinstance` group) in the plan.
- `P1-RS-RUNTIME-EXT-01-S1-02` documented Rust runtime-reference contract (`py_runtime.rs` co-located, `mod py_runtime;` + `pub use` + `use crate::py_runtime::*;`) and fail-closed conditions (fail on missing source/placement failure/inline-residue detection).
- `P1-RS-RUNTIME-EXT-01-S2-01` added missing APIs to `py_runtime.rs` (`py_str_at`/`py_slice_str`, `PyAny` conversions, `PYTRA_TID_*` + `py_isinstance` base, `pub mod time/math/pytra`) and passed syntax check with `rustc --crate-type lib src/runtime/rs/pytra/built_in/py_runtime.rs`.
- `P1-RS-RUNTIME-EXT-01-S2-02` added runtime-copy path to `py2rs.py`, confirming bundled `py_runtime.rs` output in CLI case of `test_py2rs_smoke` (4 failures in `check_py2rs_transpile` are existing unsupported `Try/Yield/Swap` differences handled in `S3-01`).
- `P1-RS-RUNTIME-EXT-01-S2-03` removed inline runtime/helper body output from `rs_emitter.py` and switched to `mod py_runtime;` + `pub use` + `use crate::py_runtime::*;` references. `isinstance` moved to runtime-side type-table initialization via `py_register_generated_type_info()` (`Once` guard).
- `P1-RS-RUNTIME-EXT-01-S3-01` passed `test_py2rs_smoke` (28), `check_py2rs_transpile.py` (`checked=129 ok=129 fail=0 skipped=10`), and `runtime_parity_check --targets rs --all-samples` (18/18 PASS), confirming no regressions.
- `P1-RS-RUNTIME-EXT-01-S3-02` regenerated 18 files in `sample/rs` with `tools/regenerate_samples.py --langs rs --force` and confirmed no `fn py_perf_counter|fn py_isdigit|mod pytra {` residue outside `py_runtime.rs`.

### P1: Fix flow for Ruby re-measurement, parity verification, and README reflection

Context: [docs/ja/plans/p1-ruby-benchmark-readme-fix.md](../plans/p1-ruby-benchmark-readme-fix.md)

1. [x] [ID: P1-RUBY-BENCH-FIX-01] Make "fresh transpile -> parity verification -> README reflection" mandatory when updating Ruby measured values.
2. [x] [ID: P1-RUBY-BENCH-FIX-01-S1-01] Re-measure `sample/01` with `ruby --yjit` (`warmup=1`, `repeat=5`) and save logs.
3. [x] [ID: P1-RUBY-BENCH-FIX-01-S1-02] Verify Ruby parity of `sample/01` via `runtime_parity_check`.
4. [x] [ID: P1-RUBY-BENCH-FIX-01-S1-03] Reflect measured value into Ruby column of `docs/ja/README.md` and lock diffs.
- `P1-RUBY-BENCH-FIX-01-S1-01` re-measured `sample/ruby/01_mandelbrot.rb` with `ruby --yjit` (warmup=1 / repeat=5), saving 5 runs and median `18.954643653007224` seconds to `work/logs/bench_ruby_yjit_01_mandelbrot_20260301.json`.
- `P1-RUBY-BENCH-FIX-01-S1-02` ran `runtime_parity_check --case-root sample --targets ruby 01_mandelbrot --ignore-unstable-stdout`, confirming `SUMMARY cases=1 pass=1 fail=0`.
- `P1-RUBY-BENCH-FIX-01-S1-03` updated Ruby value in execution-speed comparison table of `docs/ja/README.md` for `01_mandelbrot` from `18.682 -> 18.955` (rounded to 3 decimals of median).

### P1: Remove direct `Path` branches in `core.py` (stdlib source-of-truth)

Context: [docs/ja/plans/p1-core-path-direct-branch-removal.md](../plans/p1-core-path-direct-branch-removal.md)

1. [x] [ID: P1-CORE-PATH-SOT-01] Remove direct `Path` branches from `core.py` and unify through stdlib reference layer + import-resolution data.
2. [x] [ID: P1-CORE-PATH-SOT-01-S1-01] Inventory `Path`-dependent branches (return-type inference / BuiltinCall lowering / attribute inference) and fix replacement APIs.
3. [x] [ID: P1-CORE-PATH-SOT-01-S2-01] Replace `Path` judgment from hardcoded name checks with resolver-based checks, removing `fn_name == "Path"` from `core.py`.
4. [x] [ID: P1-CORE-PATH-SOT-01-S2-02] Supplement return-type inference for `Path` constructor/method/attribute through stdlib reference layer.
5. [x] [ID: P1-CORE-PATH-SOT-01-S3-01] Add anti-reintroduction regression in `test_east_core.py`.
6. [x] [ID: P1-CORE-PATH-SOT-01-S3-02] Re-run `check_py2cpp_transpile.py` and confirm non-regression.
- `P1-CORE-PATH-SOT-01-S1-01` inventoried 4 direct `Path` dependencies in `core.py` (`fn_name == "Path"` return-type inference/BuiltinCall, `owner_t == "Path"` attribute return-type inference, `BinOp "/"` `lt == "Path"`) and fixed replacement policy toward `signature_registry` and import-resolution data in the plan.
- `P1-CORE-PATH-SOT-01-S2-01` added `lookup_stdlib_imported_symbol_return_type` / `lookup_stdlib_imported_symbol_runtime_call`, migrated constructor judgment to import resolver path, and removed `fn_name == "Path"` branch from `core.py`.
- `P1-CORE-PATH-SOT-01-S2-02` migrated `Path` method return-type inference to `lookup_stdlib_method_return_type`, added alias-import (`Path as P/PP`) regressions in `test_east_core.py`, and passed `python3 -m unittest discover -s test/unit -p 'test_east_core.py' -v`.
- `P1-CORE-PATH-SOT-01-S3-01` added reintroduction detection in `test_east_core.py` (forbid direct `fn_name/owner_t` comparisons for `Path`) and locked constructor/type-inference regressions for alias-import paths.
- `P1-CORE-PATH-SOT-01-S3-02` re-ran `python3 tools/check_py2cpp_transpile.py`, confirming non-regression with `checked=134 ok=134 fail=0 skipped=6`.

## 2026-03-01 Migration: Completed Sections (P0/P1/P2 and completed P4 child tasks)

The following items were moved from `docs/ja/todo/index.md` to `todo/archive`.

### P0: Completed section (14 items)

1. [x] [ID: P0-CPP-S18-TOKENIZE-TYPED-IN-01] Type `tokenize` input in sample/18 (`object` degradation removal).
2. [x] [ID: P0-CPP-S18-ENUM-DIRECT-TYPED-01] Direct typed unpack for `enumerate(lines)` in sample/18.
3. [x] [ID: P0-CPP-S18-STR-IDENTITY-CAST-01] Remove same-type `str -> str` conversions in sample/18.
4. [x] [ID: P0-CPP-S18-TOKEN-DISPATCH-TAG-01] Tag-ify string branching in sample/18 tokenizer.
5. [x] [ID: P0-CPP-S18-BENCH-TYPED-LIST-01] Type list for benchmark source construction in sample/18.
6. [x] [ID: P0-CPP-S13-TYPED-LIST-EXPAND-01] Extend typed list handling for sample/13 under `cpp_list_model=pyobj`.
7. [x] [ID: P0-CPP-S13-CANDIDATE-CSE-01] CSE/hoist for `candidates` selector expression in sample/13.
8. [x] [ID: P0-CPP-S13-SAMECAST-CUT-01] Reduce same-type cast chains in sample/13.
9. [x] [ID: P0-CPP-S13-GRID-ROW-HOIST-01] Hoist row access for `grid` in sample/13.
10. [x] [ID: P0-CPP-S13-WHILE-EMPTY-FASTPATH-01] `.empty()` fastpath for `while stack` in sample/13.
11. [x] [ID: P0-CPP-MODULE-KW-COERCE-01] Fix keyword-argument type propagation in C++ module-import functions.
12. [x] [ID: P0-CPP-ENUM-LIST-AS-01] Introduce C++ `py_enumerate_list_as<T>()`.
13. [x] [ID: P0-CPP-FLOAT-CAST-STYLE-01] Unify C++ `float64` cast style.
14. [x] [ID: P0-EAST3-PYTO-IDENTITY-01] Reduce same-type `py_to<T>` in EAST3.

### P1: Completed section (2 items)

1. [x] [ID: P1-KOTLIN-RUNTIME-EXT-01] Kotlin runtime externalization (remove inline helpers).
2. [x] [ID: P1-LUA-SAMPLE-FULL-01] Full 18-case coverage for Lua samples.

### P2: Completed section (2 items)

1. [x] [ID: P2-JAVA-PARENS-01] Reduce excessive parentheses in Java output (readability).
2. [x] [ID: P2-EAST-IMPORT-RESOLUTION-01] Minimal import generation via EAST resolution data + CodeEmitter dependency collection.

### P4: Completed child tasks (under `P4-MULTILANG-SH-01`)

1. [x] [ID: P4-MULTILANG-SH-01-S1-01] Fix language-by-language unmet causes in stage1/stage2/stage3.
2. [x] [ID: P4-MULTILANG-SH-01-S1-02] Define contracts for runner-undefined languages.
3. [x] [ID: P4-MULTILANG-SH-01-S2-01] Resolve Rust selfhost stage1 failures.
4. [x] [ID: P4-MULTILANG-SH-01-S2-02] Resolve C# selfhost stage2 compile failures.
5. [x] [ID: P4-MULTILANG-SH-01-S2-02-S1] Resolve C# emitter selfhost-compatibility gaps.
6. [x] [ID: P4-MULTILANG-SH-01-S2-02-S2] Finalize C# selfhost import-dependency closure strategy.
7. [x] [ID: P4-MULTILANG-SH-01-S2-02-S2-S1] Early-cut first C# selfhost errors.
8. [x] [ID: P4-MULTILANG-SH-01-S2-02-S2-S2] Implement import dependency closure.
9. [x] [ID: P4-MULTILANG-SH-01-S2-02-S2-S2-S1] Single selfhost source PoC.
10. [x] [ID: P4-MULTILANG-SH-01-S2-02-S2-S2-S2] Resolve PoC failure causes / policy pivot.
11. [x] [ID: P4-MULTILANG-SH-01-S2-02-S2-S2-S2-S1] Resolve parse constraints.
12. [x] [ID: P4-MULTILANG-SH-01-S2-02-S2-S2-S2-S2] Categorize compile failures and resolve in stages.
13. [x] [ID: P4-MULTILANG-SH-01-S2-02-S2-S2-S2-S2-S1] Add tooling for machine classification of compile failures.
14. [x] [ID: P4-MULTILANG-SH-01-S2-02-S2-S2-S2-S2-S2] Resolve `CS1525/CS1002` class.
15. [x] [ID: P4-MULTILANG-SH-01-S2-02-S2-S2-S2-S2-S3] Avoid internal exceptions for `tuples > 7`.
16. [x] [ID: P4-MULTILANG-SH-01-S2-02-S2-S2-S2-S2-S4] Reduce top groups `CS1061/CS0103/CS1503`.
17. [x] [ID: P4-MULTILANG-SH-01-S2-02-S2-S2-S2-S2-S5] Reduce failures around `set/list/json` and `char/string`.
18. [x] [ID: P4-MULTILANG-SH-01-S2-02-S2-S2-S2-S2-S6] Resolve mismatches in `json`, `dict.get/items`, and static references.
19. [x] [ID: P4-MULTILANG-SH-01-S2-02-S2-S2-S2-S2-S7] Strengthen nested-helper/type reduction.
20. [x] [ID: P4-MULTILANG-SH-01-S2-02-S3] Reach pass on C# selfhost stage2/stage3.
- `docs/ja/todo/index.md` keeps only unfinished items; progress memo lines for the completed tasks above were consolidated into archive.

## 2026-03-01 Migration: Completed section (P0 4 items)

The following items were moved from `docs/ja/todo/index.md` to `todo/archive`.

### P0: Fix runtime mapping for sample/lua/01 (Highest Priority)

Context: [docs/ja/plans/p0-lua-sample01-runtime-mapping.md](../plans/p0-lua-sample01-runtime-mapping.md)

1. [x] [ID: P0-LUA-SAMPLE01-RUNTIME-01] Correct missing runtime mapping in `sample/lua/01` (time/png no-op) and resolve functional loss.
2. [x] [ID: P0-LUA-SAMPLE01-RUNTIME-01-S1-01] Implement Lua runtime mapping for `time.perf_counter` import and forbid generating `not yet mapped` comments.
3. [x] [ID: P0-LUA-SAMPLE01-RUNTIME-01-S2-01] Connect `pytra.runtime.png` / `pytra.utils.png` to real runtime calls instead of no-op stubs.
4. [x] [ID: P0-LUA-SAMPLE01-RUNTIME-01-S2-02] Remove no-op fallback for unresolved imports and switch to fail-closed (explicit error).
5. [x] [ID: P0-LUA-SAMPLE01-RUNTIME-01-S3-01] Add regression tests and lock non-regression with `sample/lua/01` regeneration + parity.

### P0: Improve output quality for sample/cpp/08 (readability + hot-path reduction)

Context: [docs/ja/plans/p0-cpp-s08-quality-uplift.md](../plans/p0-cpp-s08-quality-uplift.md)

1. [x] [ID: P0-CPP-S08-QUALITY-01] Improve generation quality for `sample/cpp/08`, raising readability and hot-path efficiency together.
2. [x] [ID: P0-CPP-S08-QUALITY-01-S1-01] Lock quality gaps in `sample/cpp/08` (initialization/conversion/branch/loop/capacity) with code fragments.
3. [x] [ID: P0-CPP-S08-QUALITY-01-S2-01] Reduce `grid` initialization from IIFE + `py_repeat` to typed direct initialization.
4. [x] [ID: P0-CPP-S08-QUALITY-01-S2-02] Simplify `bytes(frame)` on `capture` return using unnecessary-conversion reduction rules.
5. [x] [ID: P0-CPP-S08-QUALITY-01-S2-03] Introduce fastpath replacing capture `%` check with next-capture counter.
6. [x] [ID: P0-CPP-S08-QUALITY-01-S2-04] Reduce nested branches from `if/elif/elif/else` into `else if`/`switch`-equivalent output.
7. [x] [ID: P0-CPP-S08-QUALITY-01-S2-05] Add minimal rule to output `reserve` for pre-estimable `list` and apply to `frames`.
8. [x] [ID: P0-CPP-S08-QUALITY-01-S3-01] Add regression tests and lock regenerated diffs for `sample/cpp/08`.
9. [x] [ID: P0-CPP-S08-QUALITY-01-S3-02] Run transpile/unit/sample-regeneration checks and confirm non-regression.

### P0: Multi-language regression for `range(len-1, -1, -1)` (add tests + pass all backends)

Context: [docs/ja/plans/p0-multilang-downcount-range-regression.md](../plans/p0-multilang-downcount-range-regression.md)

1. [x] [ID: P0-MULTILANG-DOWNRANGE-01] Add common regression tests for `range(len-1, -1, -1)` and make all backends pass.
2. [x] [ID: P0-MULTILANG-DOWNRANGE-01-S1-01] Add minimal fixture for `range(len-1, -1, -1)` to `test/fixtures` and lock expected output.
3. [x] [ID: P0-MULTILANG-DOWNRANGE-01-S1-02] Record reproduction logs for currently failing backends (`cs/js/ts/rs`) and successful backends.
4. [x] [ID: P0-MULTILANG-DOWNRANGE-01-S2-01] Unify range-mode resolution for `ForCore(StaticRangeForPlan)`; derive descending/ascending/dynamic from `step` when `iter_plan` is not retained.
5. [x] [ID: P0-MULTILANG-DOWNRANGE-01-S2-02] Remove fixed fallback `range_mode='ascending'` from `ForCore -> ForRange` in `cs/js/rs` emitters and use common resolution result.
6. [x] [ID: P0-MULTILANG-DOWNRANGE-01-S2-03] Add regression for same case in `ts` (JS preview path) and lock reliable reflection of JS fixes.
7. [x] [ID: P0-MULTILANG-DOWNRANGE-01-S3-01] Add this fixture case to smoke/transpile tests for each backend and always detect recurrence.
8. [x] [ID: P0-MULTILANG-DOWNRANGE-01-S3-02] Confirm expected output match via runtime parity (for executable targets) and record results in decision log.

### P0: Complete Lua parity (test/fixture + sample)

Context: [docs/ja/plans/p0-lua-parity-test-sample-rollout.md](../plans/p0-lua-parity-test-sample-rollout.md)

1. [x] [ID: P0-LUA-PARITY-ALL-01] Complete Lua parity for both fixture and sample and lock consistency.
2. [x] [ID: P0-LUA-PARITY-ALL-01-S1-01] Finalize Lua parity scope (target fixture cases / all 18 samples) and lock execution steps.
3. [x] [ID: P0-LUA-PARITY-ALL-01-S1-02] Resolve unresolved items in dependency task (sample/01 runtime mapping) and remove sample parity blockers.
4. [x] [ID: P0-LUA-PARITY-ALL-01-S2-01] Run `runtime_parity_check --case-root fixture --targets lua`, fix mismatches, and reach all pass.
5. [x] [ID: P0-LUA-PARITY-ALL-01-S2-02] Run `runtime_parity_check --case-root sample --targets lua --all-samples`, fix mismatches, and reach all pass.
6. [x] [ID: P0-LUA-PARITY-ALL-01-S2-03] Confirm artifact-size parity for image cases (`artifact_size_mismatch=0`) and complete required runtime/emitter fixes.
7. [x] [ID: P0-LUA-PARITY-ALL-01-S3-01] Record parity execution results in decision log, add unit/CLI regressions as needed, and lock recurrence detection.

## 2026-03-01 Migration: Completed child tasks (parent `P0-MULTILANG-INHERIT-DISPATCH-01` continues)

The following completed child tasks were moved from `docs/ja/todo/index.md` to `todo/archive`.

Context: [docs/ja/plans/p0-multilang-inheritance-dispatch-rollout.md](../plans/p0-multilang-inheritance-dispatch-rollout.md)

1. [x] [ID: P0-MULTILANG-INHERIT-DISPATCH-01-S1-01] Connect added fixture `test/fixtures/oop/inheritance_virtual_dispatch_multilang.py` to backend smoke/parity paths.
2. [x] [ID: P0-MULTILANG-INHERIT-DISPATCH-01-S2-CS] Execute C# improvement plan [p0-cs-inheritance-dispatch-uplift.md](../plans/p0-cs-inheritance-dispatch-uplift.md).
3. [x] [ID: P0-MULTILANG-INHERIT-DISPATCH-01-S2-GO] Execute Go improvement plan [p0-go-inheritance-dispatch-uplift.md](../plans/p0-go-inheritance-dispatch-uplift.md).
