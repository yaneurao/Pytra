# TODO History (2026-02-23)

<a href="../../../ja/todo/archive/20260223.md">
  <img alt="Read in Japanese" src="https://img.shields.io/badge/docs-日本語-2563EB?style=flat-square">
</a>

This page is the English mirror of the 2026-02-23 archive migration summary.
Detailed command-by-command logs remain in the Japanese source.

## 2026-02-23 Migration: `P0: unify boxing/unboxing boundaries (Highest)`

Context: `docs/ja/plans/archive/20260223-tg-p0-boxing.md` (`TG-P0-BOXING`)

Completed IDs:
- `P0-BOX-01`: Introduced staged runtime APIs (`py_truthy`, `py_try_len`, `obj_to_rc(_or_raise)`, strict conversion helpers).
- `P0-BOX-02`: Migrated Any/object class-field and major ref-class boundary paths to `obj_to_rc_or_raise`.
- `P0-BOX-03`: Enforced type_id-based dispatch on JS/TS runtime and prohibited constructor-name-based dispatch.
- `P0-BOX-04`: Added runtime/codegen/cross-target regressions to block reintroduction of implicit fallback paths.

## 2026-02-23 Migration: `P2: microgpt transpile compatibility`

Context: `docs/ja/plans/archive/20260223-tg-p2-microgpt-compat.md` (`TG-P2-MICROGPT-COMPAT`)

Completed IDs:
- `P2-MGPT-01`: Fixed policy for parser behavior around untyped parameters (later superseded by `P3-MSP-04` update).
- `P2-MGPT-02`: Added `choices/gauss/shuffle` to random std/runtime paths.
- `P2-MGPT-03`: Added minimal microgpt-compatible fixture and transpile->C++ syntax-check regression path.
- `P2-MGPT-04`: Confirmed transpile + `g++ -fsyntax-only` path for `work/tmp/microgpt-20260222-lite.py`.

## 2026-02-23 Migration: `P3: spec draft curation (Low)`

Context: `docs/ja/plans/archive/20260223-tg-p3-spec-drafts.md` (`TG-P3-SPEC-DRAFTS`)

Completed IDs:
- `P3-SD-01`: Reconciled `spec-make.md` draft with implementation and moved adopted portions into active specs.
- `P3-SD-02`: Reconciled `spec-template.md` draft and clearly separated adopted/deferred/non-adopted items.

## 2026-02-23 Migration: completed-task history cleanup

### Section-level migrations

- `P0: runtime origin separation` (`TG-P1-RUNTIME-LAYOUT`)
  - `P0-RUNTIME-SEP-01` and children `S1..S5` completed.
  - Split runtime into generated (`pytra-gen`) vs handwritten (`pytra-core`) with CI guards.

- `P0: type_id inheritance/isinstance unification` (`TG-P0-TYPEID-ISINSTANCE`)
  - `P0-TID-01` (`S1..S4`) and `P0-TID-02` (`S1..S4-S3`) completed.
  - Unified runtime APIs and moved core type_id semantics toward `src/pytra/built_in` source-of-truth model.

- `P0: iterable/iterator contract rollout` (`TG-P0-ITER`)
  - `P0-ITER-01` (`S1..S4`) completed.
  - Added iterable runtime protocol and fixed codegen split (`static_fastpath` / `runtime_protocol`).

- `P0: selfhost stabilization` (`TG-P0-SH`)
  - `P0-SH-04` (`S1..S3`) and `P0-SH-05` completed.
  - Reduced `prepare_selfhost_source.py` patch dependence, moved hooks toggling into core emitter behavior, and stabilized guard-profile controls.

- `P1: CodeEmitter/hooks migration` (`TG-P1-CEH`)
  - `P1-CEH-01` (`S1..S4`) completed.
  - Shifted to hook-first dispatch with controlled fallback and reduced py2cpp-side boundary violations.

### Subtask-level migrations

- `P1: common CodeEmitter dispatch redesign` (`TG-P1-CED`)
  - `P1-CED-01` (`S1..S3`), `P1-CED-02`, `P1-CED-03` completed.

- `P3: microgpt source preservation` (`TG-P3-MICROGPT-SOURCE-PRESERVATION`)
  - Completed: `P3-MSP-01`, `P3-MSP-02`, `P3-MSP-04`, `P3-MSP-05`, `P3-MSP-06`, `P3-MSP-07`, `P3-MSP-08`, `P3-MSP-09`.

- `P3: pythonic-style restoration` (`TG-P3-PYTHONIC`)
  - Completed: `P3-PY-02`, `P3-CE-01`, `P3-CE-02`, `P3-CE-03`, `P3-CE-04`.

## 2026-02-23 Migration: tasks obsoleted by EAST123 integration

- `P1-CED-C-01` (language-specific runtime routing commonization) was integrated into EAST123 tasks and closed.
- `P2-ANY-01..07` (Any/object boundary standalone line) was integrated into EAST123 IR-first migration tasks and closed.

## Reference

- Source of truth: `docs/ja/todo/archive/20260223.md`
- Related plan archives:
  - `docs/ja/plans/archive/20260223-tg-p0-boxing.md`
  - `docs/ja/plans/archive/20260223-tg-p2-microgpt-compat.md`
  - `docs/ja/plans/archive/20260223-tg-p3-spec-drafts.md`
