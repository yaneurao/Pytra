<a href="../../../docs-ja/todo/archive/20260218.md">
  <img alt="Read in Japanese" src="https://img.shields.io/badge/docs-日本語-2563EB?style=flat-square">
</a>

# TODO History (2026-02-18)

## Migrated from `docs-ja/todo/index.md` (2026-02-18)

A large completed block was migrated, including:
- Expression/precedence parity checks
- Docstring/comment handling cleanup
- Parser backend unification for selfhost
- Selfhost tokenizer/parser core implementation
- Comment carry-over and leading-comment emission
- Runtime image parity automation
- Reference-semantics policy for user classes
- Class storage strategy split (`rc<T>` vs value type) with acceptance tests
- Selfhost goal fixation and parser signature support expansion
- f-string handling in the selfhost parser

## Migration: 2026-02-18 (completed from `todo.md`)

### Any/object policy migration (completed)

- Introduced `object = rc<PyObj>`.
- Implemented object boxing/unboxing helpers.
- Unified `None` checks and object stringification.

### `py2cpp` Any lowering (completed)

- Type resolution and container mapping for `Any/object`
- Boxing/unboxing generation
- `is None` handling via `py_is_none`

### selfhost recovery (partial in this section)

- Regenerated selfhost C++ and measured compile errors at that stage.

### comprehension/lambda regressions (completed)

- Added broad fixtures and runtime regression checks.

### documentation update (completed)

- Updated specs/docs/README around Any/object policy.

## Migration: 2026-02-18 (completed group 2)

Completed items included:
- Selfhost parser fixes for parse failures
- Object-receiver method-call restrictions
- Additional `super()` regression coverage
- Further EAST-side lowering for call normalization
- Emitter utility centralization in shared base

## Migration: 2026-02-18 (completed group 3)

Completed items included:
- No-value `return` support in selfhost parser
- Additional base-emitter helper paths
- Optional-dict runtime helper overloads

## Migration: 2026-02-18 (C++ runtime wrapper alignment)

Completed items included:
- Migrated from STL inheritance to wrapper composition for runtime containers/strings
- Preserved readable `for (str c : s)` generation
- Synced documentation with wrapper-based implementation

## Migration: 2026-02-18 (selfhost recovery 1-3)

Completed items included:
- Unified object-to-container conversions through typed helpers
- Disambiguated dict-get defaults through typed helpers
- Harmonized Any/dict boundaries across key emitter paths

## Migration: 2026-02-18 (completed group 4)

### Image runtime unification (Python source of truth)

Completed:
- Moved PNG/GIF C++ runtime generation toward transpiled output from Python source modules
- Expanded parser support needed for this route
- Standardized binary-identity acceptance policy
- Documented optimization-policy boundaries

### Import enhancements

Completed:
- Import and alias resolution across EAST + `py2cpp`
- Regression coverage for runtime imports
- Spec updates for supported import range
