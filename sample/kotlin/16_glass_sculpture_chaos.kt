// このファイルは自動生成です（Python -> Kotlin node-backed mode）。

// Kotlin 実行向け Node.js ランタイム補助。

import java.io.File
import java.nio.file.Files
import java.nio.file.Path
import java.util.Base64
import java.util.UUID

/**
 * Base64 で埋め込まれた JavaScript ソースコードを一時ファイルへ展開し、node で実行する。
 */
object PyRuntime {
    /**
     * @param sourceBase64 JavaScript ソースコードの Base64 文字列。
     * @param args JavaScript 側へ渡す引数配列。
     * @return node プロセスの終了コード。失敗時は 1 を返す。
     */
    @JvmStatic
    fun runEmbeddedNode(sourceBase64: String, args: Array<String>): Int {
        val sourceBytes: ByteArray = try {
            Base64.getDecoder().decode(sourceBase64)
        } catch (ex: IllegalArgumentException) {
            System.err.println("error: failed to decode embedded JavaScript source")
            return 1
        }

        val tempFile: Path = try {
            val name = "pytra_embedded_${UUID.randomUUID()}.js"
            val p = File(System.getProperty("java.io.tmpdir"), name).toPath()
            Files.write(p, sourceBytes)
            p
        } catch (ex: Exception) {
            System.err.println("error: failed to write temporary JavaScript file: ${ex.message}")
            return 1
        }

        val command = mutableListOf("node", tempFile.toString())
        command.addAll(args)
        val process: Process = try {
            ProcessBuilder(command)
                .inheritIO()
                .start()
        } catch (ex: Exception) {
            System.err.println("error: failed to launch node: ${ex.message}")
            try {
                Files.deleteIfExists(tempFile)
            } catch (_: Exception) {
            }
            return 1
        }

        val code = process.waitFor()
        try {
            Files.deleteIfExists(tempFile)
        } catch (_: Exception) {
        }
        return code
    }
}

class pytra_16_glass_sculpture_chaos {
    companion object {
        // 埋め込み JavaScript ソース（Base64）。
        private const val PYTRA_EMBEDDED_JS_BASE64: String = "Ly8gZ2VuZXJhdGVkIGludGVybmFsIEphdmFTY3JpcHQKCmNvbnN0IF9fcHl0cmFfcm9vdCA9IHByb2Nlc3MuY3dkKCk7CmNvbnN0IHB5X3J1bnRpbWUgPSByZXF1aXJlKF9fcHl0cmFfcm9vdCArICcvc3JjL2pzX21vZHVsZS9weV9ydW50aW1lLmpzJyk7CmNvbnN0IHB5X21hdGggPSByZXF1aXJlKF9fcHl0cmFfcm9vdCArICcvc3JjL2pzX21vZHVsZS9tYXRoLmpzJyk7CmNvbnN0IHB5X3RpbWUgPSByZXF1aXJlKF9fcHl0cmFfcm9vdCArICcvc3JjL2pzX21vZHVsZS90aW1lLmpzJyk7CmNvbnN0IHsgcHlQcmludCwgcHlMZW4sIHB5Qm9vbCwgcHlSYW5nZSwgcHlGbG9vckRpdiwgcHlNb2QsIHB5SW4sIHB5U2xpY2UsIHB5T3JkLCBweUNociwgcHlCeXRlYXJyYXksIHB5Qnl0ZXMsIHB5SXNEaWdpdCwgcHlJc0FscGhhIH0gPSBweV9ydW50aW1lOwpjb25zdCB7IHBlcmZDb3VudGVyIH0gPSBweV90aW1lOwpjb25zdCBtYXRoID0gcmVxdWlyZShfX3B5dHJhX3Jvb3QgKyAnL3NyYy9qc19tb2R1bGUvbWF0aC5qcycpOwpjb25zdCBwZXJmX2NvdW50ZXIgPSBwZXJmQ291bnRlcjsKY29uc3QgeyBzYXZlX2dpZiB9ID0gcmVxdWlyZShfX3B5dHJhX3Jvb3QgKyAnL3NyYy9qc19tb2R1bGUvZ2lmX2hlbHBlci5qcycpOwoKZnVuY3Rpb24gY2xhbXAwMSh2KSB7CiAgICBpZiAocHlCb29sKCgodikgPCAoMC4wKSkpKSB7CiAgICAgICAgcmV0dXJuIDAuMDsKICAgIH0KICAgIGlmIChweUJvb2woKCh2KSA+ICgxLjApKSkpIHsKICAgICAgICByZXR1cm4gMS4wOwogICAgfQogICAgcmV0dXJuIHY7Cn0KZnVuY3Rpb24gZG90KGF4LCBheSwgYXosIGJ4LCBieSwgYnopIHsKICAgIHJldHVybiAoKCgoKChheCkgKiAoYngpKSkgKyAoKChheSkgKiAoYnkpKSkpKSArICgoKGF6KSAqIChieikpKSk7Cn0KZnVuY3Rpb24gbGVuZ3RoKHgsIHksIHopIHsKICAgIHJldHVybiBtYXRoLnNxcnQoKCgoKCgoeCkgKiAoeCkpKSArICgoKHkpICogKHkpKSkpKSArICgoKHopICogKHopKSkpKTsKfQpmdW5jdGlvbiBub3JtYWxpemUoeCwgeSwgeikgewogICAgbGV0IGwgPSBsZW5ndGgoeCwgeSwgeik7CiAgICBpZiAocHlCb29sKCgobCkgPCAoMWUtMDkpKSkpIHsKICAgICAgICByZXR1cm4gWzAuMCwgMC4wLCAwLjBdOwogICAgfQogICAgcmV0dXJuIFsoKHgpIC8gKGwpKSwgKCh5KSAvIChsKSksICgoeikgLyAobCkpXTsKfQpmdW5jdGlvbiByZWZsZWN0KGl4LCBpeSwgaXosIG54LCBueSwgbnopIHsKICAgIGxldCBkID0gKChkb3QoaXgsIGl5LCBpeiwgbngsIG55LCBueikpICogKDIuMCkpOwogICAgcmV0dXJuIFsoKGl4KSAtICgoKGQpICogKG54KSkpKSwgKChpeSkgLSAoKChkKSAqIChueSkpKSksICgoaXopIC0gKCgoZCkgKiAobnopKSkpXTsKfQpmdW5jdGlvbiByZWZyYWN0KGl4LCBpeSwgaXosIG54LCBueSwgbnosIGV0YSkgewogICAgbGV0IGNvc2kgPSAoLShkb3QoaXgsIGl5LCBpeiwgbngsIG55LCBueikpKTsKICAgIGxldCBzaW50MiA9ICgoKChldGEpICogKGV0YSkpKSAqICgoKDEuMCkgLSAoKChjb3NpKSAqIChjb3NpKSkpKSkpOwogICAgaWYgKHB5Qm9vbCgoKHNpbnQyKSA+ICgxLjApKSkpIHsKICAgICAgICByZXR1cm4gcmVmbGVjdChpeCwgaXksIGl6LCBueCwgbnksIG56KTsKICAgIH0KICAgIGxldCBjb3N0ID0gbWF0aC5zcXJ0KCgoMS4wKSAtIChzaW50MikpKTsKICAgIGxldCBrID0gKCgoKGV0YSkgKiAoY29zaSkpKSAtIChjb3N0KSk7CiAgICByZXR1cm4gWygoKChldGEpICogKGl4KSkpICsgKCgoaykgKiAobngpKSkpLCAoKCgoZXRhKSAqIChpeSkpKSArICgoKGspICogKG55KSkpKSwgKCgoKGV0YSkgKiAoaXopKSkgKyAoKChrKSAqIChueikpKSldOwp9CmZ1bmN0aW9uIHNjaGxpY2soY29zX3RoZXRhLCBmMCkgewogICAgbGV0IG0gPSAoKDEuMCkgLSAoY29zX3RoZXRhKSk7CiAgICByZXR1cm4gKChmMCkgKyAoKCgoKDEuMCkgLSAoZjApKSkgKiAoKCgoKCgoKChtKSAqIChtKSkpICogKG0pKSkgKiAobSkpKSAqIChtKSkpKSkpOwp9CmZ1bmN0aW9uIHNreV9jb2xvcihkeCwgZHksIGR6LCB0cGhhc2UpIHsKICAgIGxldCB0ID0gKCgwLjUpICogKCgoZHkpICsgKDEuMCkpKSk7CiAgICBsZXQgciA9ICgoMC4wNikgKyAoKCgwLjIpICogKHQpKSkpOwogICAgbGV0IGcgPSAoKDAuMSkgKyAoKCgwLjI1KSAqICh0KSkpKTsKICAgIGxldCBiID0gKCgwLjE2KSArICgoKDAuNDUpICogKHQpKSkpOwogICAgbGV0IGJhbmQgPSAoKDAuNSkgKyAoKCgwLjUpICogKG1hdGguc2luKCgoKCgoKDguMCkgKiAoZHgpKSkgKyAoKCg2LjApICogKGR6KSkpKSkgKyAodHBoYXNlKSkpKSkpKTsKICAgIHIgPSByICsgKCgwLjA4KSAqIChiYW5kKSk7CiAgICBnID0gZyArICgoMC4wNSkgKiAoYmFuZCkpOwogICAgYiA9IGIgKyAoKDAuMTIpICogKGJhbmQpKTsKICAgIHJldHVybiBbY2xhbXAwMShyKSwgY2xhbXAwMShnKSwgY2xhbXAwMShiKV07Cn0KZnVuY3Rpb24gc3BoZXJlX2ludGVyc2VjdChveCwgb3ksIG96LCBkeCwgZHksIGR6LCBjeCwgY3ksIGN6LCByYWRpdXMpIHsKICAgIGxldCBseCA9ICgob3gpIC0gKGN4KSk7CiAgICBsZXQgbHkgPSAoKG95KSAtIChjeSkpOwogICAgbGV0IGx6ID0gKChveikgLSAoY3opKTsKICAgIGxldCBiID0gKCgoKCgobHgpICogKGR4KSkpICsgKCgobHkpICogKGR5KSkpKSkgKyAoKChseikgKiAoZHopKSkpOwogICAgbGV0IGMgPSAoKCgoKCgoKGx4KSAqIChseCkpKSArICgoKGx5KSAqIChseSkpKSkpICsgKCgobHopICogKGx6KSkpKSkgLSAoKChyYWRpdXMpICogKHJhZGl1cykpKSk7CiAgICBsZXQgaCA9ICgoKChiKSAqIChiKSkpIC0gKGMpKTsKICAgIGlmIChweUJvb2woKChoKSA8ICgwLjApKSkpIHsKICAgICAgICByZXR1cm4gKC0oMS4wKSk7CiAgICB9CiAgICBsZXQgcyA9IG1hdGguc3FydChoKTsKICAgIGxldCB0MCA9ICgoKC0oYikpKSAtIChzKSk7CiAgICBpZiAocHlCb29sKCgodDApID4gKDAuMDAwMSkpKSkgewogICAgICAgIHJldHVybiB0MDsKICAgIH0KICAgIGxldCB0MSA9ICgoKC0oYikpKSArIChzKSk7CiAgICBpZiAocHlCb29sKCgodDEpID4gKDAuMDAwMSkpKSkgewogICAgICAgIHJldHVybiB0MTsKICAgIH0KICAgIHJldHVybiAoLSgxLjApKTsKfQpmdW5jdGlvbiBwYWxldHRlXzMzMigpIHsKICAgIGxldCBwID0gcHlCeXRlYXJyYXkoKCgyNTYpICogKDMpKSk7CiAgICBsZXQgaTsKICAgIGZvciAobGV0IF9fcHl0cmFfaV8xID0gMDsgX19weXRyYV9pXzEgPCAyNTY7IF9fcHl0cmFfaV8xICs9IDEpIHsKICAgICAgICBpID0gX19weXRyYV9pXzE7CiAgICAgICAgbGV0IHIgPSAoKCgoaSkgPj4gKDUpKSkgJiAoNykpOwogICAgICAgIGxldCBnID0gKCgoKGkpID4+ICgyKSkpICYgKDcpKTsKICAgICAgICBsZXQgYiA9ICgoaSkgJiAoMykpOwogICAgICAgIHBbKCgoKGkpICogKDMpKSkgKyAoMCkpXSA9IE1hdGgudHJ1bmMoTnVtYmVyKCgoKCgyNTUpICogKHIpKSkgLyAoNykpKSk7CiAgICAgICAgcFsoKCgoaSkgKiAoMykpKSArICgxKSldID0gTWF0aC50cnVuYyhOdW1iZXIoKCgoKDI1NSkgKiAoZykpKSAvICg3KSkpKTsKICAgICAgICBwWygoKChpKSAqICgzKSkpICsgKDIpKV0gPSBNYXRoLnRydW5jKE51bWJlcigoKCgoMjU1KSAqIChiKSkpIC8gKDMpKSkpOwogICAgfQogICAgcmV0dXJuIHB5Qnl0ZXMocCk7Cn0KZnVuY3Rpb24gcXVhbnRpemVfMzMyKHIsIGcsIGIpIHsKICAgIGxldCByciA9IE1hdGgudHJ1bmMoTnVtYmVyKCgoY2xhbXAwMShyKSkgKiAoMjU1LjApKSkpOwogICAgbGV0IGdnID0gTWF0aC50cnVuYyhOdW1iZXIoKChjbGFtcDAxKGcpKSAqICgyNTUuMCkpKSk7CiAgICBsZXQgYmIgPSBNYXRoLnRydW5jKE51bWJlcigoKGNsYW1wMDEoYikpICogKDI1NS4wKSkpKTsKICAgIHJldHVybiAoKCgoKCgoKHJyKSA+PiAoNSkpKSA8PCAoNSkpKSArICgoKCgoZ2cpID4+ICg1KSkpIDw8ICgyKSkpKSkgKyAoKChiYikgPj4gKDYpKSkpOwp9CmZ1bmN0aW9uIHJlbmRlcl9mcmFtZSh3aWR0aCwgaGVpZ2h0LCBmcmFtZV9pZCwgZnJhbWVzX24pIHsKICAgIGxldCB0ID0gKChmcmFtZV9pZCkgLyAoZnJhbWVzX24pKTsKICAgIGxldCB0cGhhc2UgPSAoKCgoMi4wKSAqIChtYXRoLnBpKSkpICogKHQpKTsKICAgIGxldCBjYW1fciA9IDMuMDsKICAgIGxldCBjYW1feCA9ICgoY2FtX3IpICogKG1hdGguY29zKCgodHBoYXNlKSAqICgwLjkpKSkpKTsKICAgIGxldCBjYW1feSA9ICgoMS4xKSArICgoKDAuMjUpICogKG1hdGguc2luKCgodHBoYXNlKSAqICgwLjYpKSkpKSkpOwogICAgbGV0IGNhbV96ID0gKChjYW1fcikgKiAobWF0aC5zaW4oKCh0cGhhc2UpICogKDAuOSkpKSkpOwogICAgbGV0IGxvb2tfeCA9IDAuMDsKICAgIGxldCBsb29rX3kgPSAwLjM1OwogICAgbGV0IGxvb2tfeiA9IDAuMDsKICAgIGNvbnN0IF9fcHl0cmFfdHVwbGVfMiA9IG5vcm1hbGl6ZSgoKGxvb2tfeCkgLSAoY2FtX3gpKSwgKChsb29rX3kpIC0gKGNhbV95KSksICgobG9va196KSAtIChjYW1feikpKTsKICAgIGxldCBmd2RfeCA9IF9fcHl0cmFfdHVwbGVfMlswXTsKICAgIGxldCBmd2RfeSA9IF9fcHl0cmFfdHVwbGVfMlsxXTsKICAgIGxldCBmd2RfeiA9IF9fcHl0cmFfdHVwbGVfMlsyXTsKICAgIGNvbnN0IF9fcHl0cmFfdHVwbGVfMyA9IG5vcm1hbGl6ZShmd2RfeiwgMC4wLCAoLShmd2RfeCkpKTsKICAgIGxldCByaWdodF94ID0gX19weXRyYV90dXBsZV8zWzBdOwogICAgbGV0IHJpZ2h0X3kgPSBfX3B5dHJhX3R1cGxlXzNbMV07CiAgICBsZXQgcmlnaHRfeiA9IF9fcHl0cmFfdHVwbGVfM1syXTsKICAgIGNvbnN0IF9fcHl0cmFfdHVwbGVfNCA9IG5vcm1hbGl6ZSgoKCgocmlnaHRfeSkgKiAoZndkX3opKSkgLSAoKChyaWdodF96KSAqIChmd2RfeSkpKSksICgoKChyaWdodF96KSAqIChmd2RfeCkpKSAtICgoKHJpZ2h0X3gpICogKGZ3ZF96KSkpKSwgKCgoKHJpZ2h0X3gpICogKGZ3ZF95KSkpIC0gKCgocmlnaHRfeSkgKiAoZndkX3gpKSkpKTsKICAgIGxldCB1cF94ID0gX19weXRyYV90dXBsZV80WzBdOwogICAgbGV0IHVwX3kgPSBfX3B5dHJhX3R1cGxlXzRbMV07CiAgICBsZXQgdXBfeiA9IF9fcHl0cmFfdHVwbGVfNFsyXTsKICAgIGxldCBzMHggPSAoKDAuOSkgKiAobWF0aC5jb3MoKCgxLjMpICogKHRwaGFzZSkpKSkpOwogICAgbGV0IHMweSA9ICgoMC4xNSkgKyAoKCgwLjM1KSAqIChtYXRoLnNpbigoKDEuNykgKiAodHBoYXNlKSkpKSkpKTsKICAgIGxldCBzMHogPSAoKDAuOSkgKiAobWF0aC5zaW4oKCgxLjMpICogKHRwaGFzZSkpKSkpOwogICAgbGV0IHMxeCA9ICgoMS4yKSAqIChtYXRoLmNvcygoKCgoMS4zKSAqICh0cGhhc2UpKSkgKyAoMi4wOTQpKSkpKTsKICAgIGxldCBzMXkgPSAoKDAuMSkgKyAoKCgwLjQpICogKG1hdGguc2luKCgoKCgxLjEpICogKHRwaGFzZSkpKSArICgwLjgpKSkpKSkpOwogICAgbGV0IHMxeiA9ICgoMS4yKSAqIChtYXRoLnNpbigoKCgoMS4zKSAqICh0cGhhc2UpKSkgKyAoMi4wOTQpKSkpKTsKICAgIGxldCBzMnggPSAoKDEuMCkgKiAobWF0aC5jb3MoKCgoKDEuMykgKiAodHBoYXNlKSkpICsgKDQuMTg4KSkpKSk7CiAgICBsZXQgczJ5ID0gKCgwLjIpICsgKCgoMC4zKSAqIChtYXRoLnNpbigoKCgoMS41KSAqICh0cGhhc2UpKSkgKyAoMS45KSkpKSkpKTsKICAgIGxldCBzMnogPSAoKDEuMCkgKiAobWF0aC5zaW4oKCgoKDEuMykgKiAodHBoYXNlKSkpICsgKDQuMTg4KSkpKSk7CiAgICBsZXQgbHIgPSAwLjM1OwogICAgbGV0IGx4ID0gKCgyLjQpICogKG1hdGguY29zKCgodHBoYXNlKSAqICgxLjgpKSkpKTsKICAgIGxldCBseSA9ICgoMS44KSArICgoKDAuOCkgKiAobWF0aC5zaW4oKCh0cGhhc2UpICogKDEuMikpKSkpKSk7CiAgICBsZXQgbHogPSAoKDIuNCkgKiAobWF0aC5zaW4oKCh0cGhhc2UpICogKDEuOCkpKSkpOwogICAgbGV0IGZyYW1lID0gcHlCeXRlYXJyYXkoKCh3aWR0aCkgKiAoaGVpZ2h0KSkpOwogICAgbGV0IGFzcGVjdCA9ICgod2lkdGgpIC8gKGhlaWdodCkpOwogICAgbGV0IGZvdiA9IDEuMjU7CiAgICBsZXQgaSA9IDA7CiAgICBsZXQgcHk7CiAgICBmb3IgKGxldCBfX3B5dHJhX2lfNSA9IDA7IF9fcHl0cmFfaV81IDwgaGVpZ2h0OyBfX3B5dHJhX2lfNSArPSAxKSB7CiAgICAgICAgcHkgPSBfX3B5dHJhX2lfNTsKICAgICAgICBsZXQgc3kgPSAoKDEuMCkgLSAoKCgoKDIuMCkgKiAoKChweSkgKyAoMC41KSkpKSkgLyAoaGVpZ2h0KSkpKTsKICAgICAgICBsZXQgcHg7CiAgICAgICAgZm9yIChsZXQgX19weXRyYV9pXzYgPSAwOyBfX3B5dHJhX2lfNiA8IHdpZHRoOyBfX3B5dHJhX2lfNiArPSAxKSB7CiAgICAgICAgICAgIHB4ID0gX19weXRyYV9pXzY7CiAgICAgICAgICAgIGxldCBzeCA9ICgoKCgoKCgoMi4wKSAqICgoKHB4KSArICgwLjUpKSkpKSAvICh3aWR0aCkpKSAtICgxLjApKSkgKiAoYXNwZWN0KSk7CiAgICAgICAgICAgIGxldCByeCA9ICgoZndkX3gpICsgKCgoZm92KSAqICgoKCgoc3gpICogKHJpZ2h0X3gpKSkgKyAoKChzeSkgKiAodXBfeCkpKSkpKSkpOwogICAgICAgICAgICBsZXQgcnkgPSAoKGZ3ZF95KSArICgoKGZvdikgKiAoKCgoKHN4KSAqIChyaWdodF95KSkpICsgKCgoc3kpICogKHVwX3kpKSkpKSkpKTsKICAgICAgICAgICAgbGV0IHJ6ID0gKChmd2RfeikgKyAoKChmb3YpICogKCgoKChzeCkgKiAocmlnaHRfeikpKSArICgoKHN5KSAqICh1cF96KSkpKSkpKSk7CiAgICAgICAgICAgIGNvbnN0IF9fcHl0cmFfdHVwbGVfNyA9IG5vcm1hbGl6ZShyeCwgcnksIHJ6KTsKICAgICAgICAgICAgbGV0IGR4ID0gX19weXRyYV90dXBsZV83WzBdOwogICAgICAgICAgICBsZXQgZHkgPSBfX3B5dHJhX3R1cGxlXzdbMV07CiAgICAgICAgICAgIGxldCBkeiA9IF9fcHl0cmFfdHVwbGVfN1syXTsKICAgICAgICAgICAgbGV0IGJlc3RfdCA9IDEwMDAwMDAwMDAuMDsKICAgICAgICAgICAgbGV0IGhpdF9raW5kID0gMDsKICAgICAgICAgICAgbGV0IHIgPSAwLjA7CiAgICAgICAgICAgIGxldCBnID0gMC4wOwogICAgICAgICAgICBsZXQgYiA9IDAuMDsKICAgICAgICAgICAgaWYgKHB5Qm9vbCgoKGR5KSA8ICgoLSgxZS0wNikpKSkpKSB7CiAgICAgICAgICAgICAgICBsZXQgdGYgPSAoKCgoKC0oMS4yKSkpIC0gKGNhbV95KSkpIC8gKGR5KSk7CiAgICAgICAgICAgICAgICBpZiAocHlCb29sKCgoKHRmKSA+ICgwLjAwMDEpKSAmJiAoKHRmKSA8IChiZXN0X3QpKSkpKSB7CiAgICAgICAgICAgICAgICAgICAgYmVzdF90ID0gdGY7CiAgICAgICAgICAgICAgICAgICAgaGl0X2tpbmQgPSAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCB0MCA9IHNwaGVyZV9pbnRlcnNlY3QoY2FtX3gsIGNhbV95LCBjYW1feiwgZHgsIGR5LCBkeiwgczB4LCBzMHksIHMweiwgMC42NSk7CiAgICAgICAgICAgIGlmIChweUJvb2woKCgodDApID4gKDAuMCkpICYmICgodDApIDwgKGJlc3RfdCkpKSkpIHsKICAgICAgICAgICAgICAgIGJlc3RfdCA9IHQwOwogICAgICAgICAgICAgICAgaGl0X2tpbmQgPSAyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCB0MSA9IHNwaGVyZV9pbnRlcnNlY3QoY2FtX3gsIGNhbV95LCBjYW1feiwgZHgsIGR5LCBkeiwgczF4LCBzMXksIHMxeiwgMC43Mik7CiAgICAgICAgICAgIGlmIChweUJvb2woKCgodDEpID4gKDAuMCkpICYmICgodDEpIDwgKGJlc3RfdCkpKSkpIHsKICAgICAgICAgICAgICAgIGJlc3RfdCA9IHQxOwogICAgICAgICAgICAgICAgaGl0X2tpbmQgPSAzOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCB0MiA9IHNwaGVyZV9pbnRlcnNlY3QoY2FtX3gsIGNhbV95LCBjYW1feiwgZHgsIGR5LCBkeiwgczJ4LCBzMnksIHMyeiwgMC41OCk7CiAgICAgICAgICAgIGlmIChweUJvb2woKCgodDIpID4gKDAuMCkpICYmICgodDIpIDwgKGJlc3RfdCkpKSkpIHsKICAgICAgICAgICAgICAgIGJlc3RfdCA9IHQyOwogICAgICAgICAgICAgICAgaGl0X2tpbmQgPSA0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChweUJvb2woKChoaXRfa2luZCkgPT09ICgwKSkpKSB7CiAgICAgICAgICAgICAgICBjb25zdCBfX3B5dHJhX3R1cGxlXzggPSBza3lfY29sb3IoZHgsIGR5LCBkeiwgdHBoYXNlKTsKICAgICAgICAgICAgICAgIHIgPSBfX3B5dHJhX3R1cGxlXzhbMF07CiAgICAgICAgICAgICAgICBnID0gX19weXRyYV90dXBsZV84WzFdOwogICAgICAgICAgICAgICAgYiA9IF9fcHl0cmFfdHVwbGVfOFsyXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIChweUJvb2woKChoaXRfa2luZCkgPT09ICgxKSkpKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGh4ID0gKChjYW1feCkgKyAoKChiZXN0X3QpICogKGR4KSkpKTsKICAgICAgICAgICAgICAgICAgICBsZXQgaHogPSAoKGNhbV96KSArICgoKGJlc3RfdCkgKiAoZHopKSkpOwogICAgICAgICAgICAgICAgICAgIGxldCBjeCA9IE1hdGgudHJ1bmMoTnVtYmVyKG1hdGguZmxvb3IoKChoeCkgKiAoMi4wKSkpKSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGN6ID0gTWF0aC50cnVuYyhOdW1iZXIobWF0aC5mbG9vcigoKGh6KSAqICgyLjApKSkpKTsKICAgICAgICAgICAgICAgICAgICBsZXQgY2hlY2tlciA9IChweUJvb2woKChweU1vZCgoKGN4KSArIChjeikpLCAyKSkgPT09ICgwKSkpID8gMCA6IDEpOwogICAgICAgICAgICAgICAgICAgIGxldCBiYXNlX3IgPSAocHlCb29sKCgoY2hlY2tlcikgPT09ICgwKSkpID8gMC4xIDogMC4wNCk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGJhc2VfZyA9IChweUJvb2woKChjaGVja2VyKSA9PT0gKDApKSkgPyAwLjExIDogMC4wNSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGJhc2VfYiA9IChweUJvb2woKChjaGVja2VyKSA9PT0gKDApKSkgPyAwLjEzIDogMC4wOCk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGx4diA9ICgobHgpIC0gKGh4KSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGx5diA9ICgobHkpIC0gKCgtKDEuMikpKSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGx6diA9ICgobHopIC0gKGh6KSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgX19weXRyYV90dXBsZV85ID0gbm9ybWFsaXplKGx4diwgbHl2LCBsenYpOwogICAgICAgICAgICAgICAgICAgIGxldCBsZHggPSBfX3B5dHJhX3R1cGxlXzlbMF07CiAgICAgICAgICAgICAgICAgICAgbGV0IGxkeSA9IF9fcHl0cmFfdHVwbGVfOVsxXTsKICAgICAgICAgICAgICAgICAgICBsZXQgbGR6ID0gX19weXRyYV90dXBsZV85WzJdOwogICAgICAgICAgICAgICAgICAgIGxldCBuZG90bCA9IE1hdGgubWF4KGxkeSwgMC4wKTsKICAgICAgICAgICAgICAgICAgICBsZXQgbGRpc3QyID0gKCgoKCgobHh2KSAqIChseHYpKSkgKyAoKChseXYpICogKGx5dikpKSkpICsgKCgobHp2KSAqIChsenYpKSkpOwogICAgICAgICAgICAgICAgICAgIGxldCBnbG93ID0gKCg4LjApIC8gKCgoMS4wKSArIChsZGlzdDIpKSkpOwogICAgICAgICAgICAgICAgICAgIHIgPSAoKCgoYmFzZV9yKSArICgoKDAuOCkgKiAoZ2xvdykpKSkpICsgKCgoMC4yKSAqIChuZG90bCkpKSk7CiAgICAgICAgICAgICAgICAgICAgZyA9ICgoKChiYXNlX2cpICsgKCgoMC41KSAqIChnbG93KSkpKSkgKyAoKCgwLjE4KSAqIChuZG90bCkpKSk7CiAgICAgICAgICAgICAgICAgICAgYiA9ICgoKChiYXNlX2IpICsgKCgoMS4wKSAqIChnbG93KSkpKSkgKyAoKCgwLjI0KSAqIChuZG90bCkpKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGxldCBjeCA9IDAuMDsKICAgICAgICAgICAgICAgICAgICBsZXQgY3kgPSAwLjA7CiAgICAgICAgICAgICAgICAgICAgbGV0IGN6ID0gMC4wOwogICAgICAgICAgICAgICAgICAgIGxldCByYWQgPSAxLjA7CiAgICAgICAgICAgICAgICAgICAgaWYgKHB5Qm9vbCgoKGhpdF9raW5kKSA9PT0gKDIpKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3ggPSBzMHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN5ID0gczB5OwogICAgICAgICAgICAgICAgICAgICAgICBjeiA9IHMwejsKICAgICAgICAgICAgICAgICAgICAgICAgcmFkID0gMC42NTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocHlCb29sKCgoaGl0X2tpbmQpID09PSAoMykpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3ggPSBzMXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjeSA9IHMxeTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN6ID0gczF6OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFkID0gMC43MjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN4ID0gczJ4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3kgPSBzMnk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjeiA9IHMyejsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhZCA9IDAuNTg7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbGV0IGh4ID0gKChjYW1feCkgKyAoKChiZXN0X3QpICogKGR4KSkpKTsKICAgICAgICAgICAgICAgICAgICBsZXQgaHkgPSAoKGNhbV95KSArICgoKGJlc3RfdCkgKiAoZHkpKSkpOwogICAgICAgICAgICAgICAgICAgIGxldCBoeiA9ICgoY2FtX3opICsgKCgoYmVzdF90KSAqIChkeikpKSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgX19weXRyYV90dXBsZV8xMCA9IG5vcm1hbGl6ZSgoKCgoaHgpIC0gKGN4KSkpIC8gKHJhZCkpLCAoKCgoaHkpIC0gKGN5KSkpIC8gKHJhZCkpLCAoKCgoaHopIC0gKGN6KSkpIC8gKHJhZCkpKTsKICAgICAgICAgICAgICAgICAgICBsZXQgbnggPSBfX3B5dHJhX3R1cGxlXzEwWzBdOwogICAgICAgICAgICAgICAgICAgIGxldCBueSA9IF9fcHl0cmFfdHVwbGVfMTBbMV07CiAgICAgICAgICAgICAgICAgICAgbGV0IG56ID0gX19weXRyYV90dXBsZV8xMFsyXTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBfX3B5dHJhX3R1cGxlXzExID0gcmVmbGVjdChkeCwgZHksIGR6LCBueCwgbnksIG56KTsKICAgICAgICAgICAgICAgICAgICBsZXQgcmR4ID0gX19weXRyYV90dXBsZV8xMVswXTsKICAgICAgICAgICAgICAgICAgICBsZXQgcmR5ID0gX19weXRyYV90dXBsZV8xMVsxXTsKICAgICAgICAgICAgICAgICAgICBsZXQgcmR6ID0gX19weXRyYV90dXBsZV8xMVsyXTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBfX3B5dHJhX3R1cGxlXzEyID0gcmVmcmFjdChkeCwgZHksIGR6LCBueCwgbnksIG56LCAoKDEuMCkgLyAoMS40NSkpKTsKICAgICAgICAgICAgICAgICAgICBsZXQgdGR4ID0gX19weXRyYV90dXBsZV8xMlswXTsKICAgICAgICAgICAgICAgICAgICBsZXQgdGR5ID0gX19weXRyYV90dXBsZV8xMlsxXTsKICAgICAgICAgICAgICAgICAgICBsZXQgdGR6ID0gX19weXRyYV90dXBsZV8xMlsyXTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBfX3B5dHJhX3R1cGxlXzEzID0gc2t5X2NvbG9yKHJkeCwgcmR5LCByZHosIHRwaGFzZSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHNyID0gX19weXRyYV90dXBsZV8xM1swXTsKICAgICAgICAgICAgICAgICAgICBsZXQgc2cgPSBfX3B5dHJhX3R1cGxlXzEzWzFdOwogICAgICAgICAgICAgICAgICAgIGxldCBzYiA9IF9fcHl0cmFfdHVwbGVfMTNbMl07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgX19weXRyYV90dXBsZV8xNCA9IHNreV9jb2xvcih0ZHgsIHRkeSwgdGR6LCAoKHRwaGFzZSkgKyAoMC44KSkpOwogICAgICAgICAgICAgICAgICAgIGxldCB0ciA9IF9fcHl0cmFfdHVwbGVfMTRbMF07CiAgICAgICAgICAgICAgICAgICAgbGV0IHRnID0gX19weXRyYV90dXBsZV8xNFsxXTsKICAgICAgICAgICAgICAgICAgICBsZXQgdGIgPSBfX3B5dHJhX3R1cGxlXzE0WzJdOwogICAgICAgICAgICAgICAgICAgIGxldCBjb3NpID0gTWF0aC5tYXgoKC0oKCgoKCgoZHgpICogKG54KSkpICsgKCgoZHkpICogKG55KSkpKSkgKyAoKChkeikgKiAobnopKSkpKSksIDAuMCk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGZyID0gc2NobGljayhjb3NpLCAwLjA0KTsKICAgICAgICAgICAgICAgICAgICByID0gKCgoKHRyKSAqICgoKDEuMCkgLSAoZnIpKSkpKSArICgoKHNyKSAqIChmcikpKSk7CiAgICAgICAgICAgICAgICAgICAgZyA9ICgoKCh0ZykgKiAoKCgxLjApIC0gKGZyKSkpKSkgKyAoKChzZykgKiAoZnIpKSkpOwogICAgICAgICAgICAgICAgICAgIGIgPSAoKCgodGIpICogKCgoMS4wKSAtIChmcikpKSkpICsgKCgoc2IpICogKGZyKSkpKTsKICAgICAgICAgICAgICAgICAgICBsZXQgbHh2ID0gKChseCkgLSAoaHgpKTsKICAgICAgICAgICAgICAgICAgICBsZXQgbHl2ID0gKChseSkgLSAoaHkpKTsKICAgICAgICAgICAgICAgICAgICBsZXQgbHp2ID0gKChseikgLSAoaHopKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBfX3B5dHJhX3R1cGxlXzE1ID0gbm9ybWFsaXplKGx4diwgbHl2LCBsenYpOwogICAgICAgICAgICAgICAgICAgIGxldCBsZHggPSBfX3B5dHJhX3R1cGxlXzE1WzBdOwogICAgICAgICAgICAgICAgICAgIGxldCBsZHkgPSBfX3B5dHJhX3R1cGxlXzE1WzFdOwogICAgICAgICAgICAgICAgICAgIGxldCBsZHogPSBfX3B5dHJhX3R1cGxlXzE1WzJdOwogICAgICAgICAgICAgICAgICAgIGxldCBuZG90bCA9IE1hdGgubWF4KCgoKCgoKG54KSAqIChsZHgpKSkgKyAoKChueSkgKiAobGR5KSkpKSkgKyAoKChueikgKiAobGR6KSkpKSwgMC4wKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBfX3B5dHJhX3R1cGxlXzE2ID0gbm9ybWFsaXplKCgobGR4KSAtIChkeCkpLCAoKGxkeSkgLSAoZHkpKSwgKChsZHopIC0gKGR6KSkpOwogICAgICAgICAgICAgICAgICAgIGxldCBodnggPSBfX3B5dHJhX3R1cGxlXzE2WzBdOwogICAgICAgICAgICAgICAgICAgIGxldCBodnkgPSBfX3B5dHJhX3R1cGxlXzE2WzFdOwogICAgICAgICAgICAgICAgICAgIGxldCBodnogPSBfX3B5dHJhX3R1cGxlXzE2WzJdOwogICAgICAgICAgICAgICAgICAgIGxldCBuZG90aCA9IE1hdGgubWF4KCgoKCgoKG54KSAqIChodngpKSkgKyAoKChueSkgKiAoaHZ5KSkpKSkgKyAoKChueikgKiAoaHZ6KSkpKSwgMC4wKTsKICAgICAgICAgICAgICAgICAgICBsZXQgc3BlYyA9ICgobmRvdGgpICogKG5kb3RoKSk7CiAgICAgICAgICAgICAgICAgICAgc3BlYyA9ICgoc3BlYykgKiAoc3BlYykpOwogICAgICAgICAgICAgICAgICAgIHNwZWMgPSAoKHNwZWMpICogKHNwZWMpKTsKICAgICAgICAgICAgICAgICAgICBzcGVjID0gKChzcGVjKSAqIChzcGVjKSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGdsb3cgPSAoKDEwLjApIC8gKCgoKCgoKDEuMCkgKyAoKChseHYpICogKGx4dikpKSkpICsgKCgobHl2KSAqIChseXYpKSkpKSArICgoKGx6dikgKiAobHp2KSkpKSkpOwogICAgICAgICAgICAgICAgICAgIHIgPSByICsgKCgoKCgoMC4yKSAqIChuZG90bCkpKSArICgoKDAuOCkgKiAoc3BlYykpKSkpICsgKCgoMC40NSkgKiAoZ2xvdykpKSk7CiAgICAgICAgICAgICAgICAgICAgZyA9IGcgKyAoKCgoKCgwLjE4KSAqIChuZG90bCkpKSArICgoKDAuNikgKiAoc3BlYykpKSkpICsgKCgoMC4zNSkgKiAoZ2xvdykpKSk7CiAgICAgICAgICAgICAgICAgICAgYiA9IGIgKyAoKCgoKCgwLjI2KSAqIChuZG90bCkpKSArICgoKDEuMCkgKiAoc3BlYykpKSkpICsgKCgoMC42NSkgKiAoZ2xvdykpKSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHB5Qm9vbCgoKGhpdF9raW5kKSA9PT0gKDIpKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgciA9IHIgKiAwLjk1OwogICAgICAgICAgICAgICAgICAgICAgICBnID0gZyAqIDEuMDU7CiAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBiICogMS4xOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChweUJvb2woKChoaXRfa2luZCkgPT09ICgzKSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gciAqIDEuMDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gZyAqIDAuOTg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gYiAqIDEuMDQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gciAqIDEuMDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gZyAqIDEuMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBiICogMC45NTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByID0gbWF0aC5zcXJ0KGNsYW1wMDEocikpOwogICAgICAgICAgICBnID0gbWF0aC5zcXJ0KGNsYW1wMDEoZykpOwogICAgICAgICAgICBiID0gbWF0aC5zcXJ0KGNsYW1wMDEoYikpOwogICAgICAgICAgICBmcmFtZVtpXSA9IHF1YW50aXplXzMzMihyLCBnLCBiKTsKICAgICAgICAgICAgaSA9IGkgKyAxOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBweUJ5dGVzKGZyYW1lKTsKfQpmdW5jdGlvbiBydW5fMTZfZ2xhc3Nfc2N1bHB0dXJlX2NoYW9zKCkgewogICAgbGV0IHdpZHRoID0gMzIwOwogICAgbGV0IGhlaWdodCA9IDI0MDsKICAgIGxldCBmcmFtZXNfbiA9IDcyOwogICAgbGV0IG91dF9wYXRoID0gJ3NhbXBsZS9vdXQvMTZfZ2xhc3Nfc2N1bHB0dXJlX2NoYW9zLmdpZic7CiAgICBsZXQgc3RhcnQgPSBwZXJmX2NvdW50ZXIoKTsKICAgIGxldCBmcmFtZXMgPSBbXTsKICAgIGxldCBpOwogICAgZm9yIChsZXQgX19weXRyYV9pXzE3ID0gMDsgX19weXRyYV9pXzE3IDwgZnJhbWVzX247IF9fcHl0cmFfaV8xNyArPSAxKSB7CiAgICAgICAgaSA9IF9fcHl0cmFfaV8xNzsKICAgICAgICBmcmFtZXMucHVzaChyZW5kZXJfZnJhbWUod2lkdGgsIGhlaWdodCwgaSwgZnJhbWVzX24pKTsKICAgIH0KICAgIHNhdmVfZ2lmKG91dF9wYXRoLCB3aWR0aCwgaGVpZ2h0LCBmcmFtZXMsIHBhbGV0dGVfMzMyKCksIDYsIDApOwogICAgbGV0IGVsYXBzZWQgPSAoKHBlcmZfY291bnRlcigpKSAtIChzdGFydCkpOwogICAgcHlQcmludCgnb3V0cHV0OicsIG91dF9wYXRoKTsKICAgIHB5UHJpbnQoJ2ZyYW1lczonLCBmcmFtZXNfbik7CiAgICBweVByaW50KCdlbGFwc2VkX3NlYzonLCBlbGFwc2VkKTsKfQpydW5fMTZfZ2xhc3Nfc2N1bHB0dXJlX2NoYW9zKCk7Cg=="

        // エントリポイント。
        @JvmStatic
        fun main(args: Array<String>) {
            val code = PyRuntime.runEmbeddedNode(PYTRA_EMBEDDED_JS_BASE64, args)
            kotlin.system.exitProcess(code)
        }
    }
}
