# サンプル一覧

このディレクトリには、Python の元サンプルと各ターゲット言語への変換結果を配置しています。

<a href="readme.md">
  <img alt="Read in English" src="https://img.shields.io/badge/sample-English-2563EB?style=flat-square">
</a>

- ゴールデンマニフェスト: [`golden/manifest.json`](golden/manifest.json)

| No | サンプル | 実行結果 | Py | C++ | Rust | C# | JS | TS | Go | Java | Kotlin | Swift |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 01 | mandelbrot | [`01_mandelbrot.png`](images/01_mandelbrot.png) | [`py`](py/01_mandelbrot.py) | [`cpp`](cpp/01_mandelbrot.cpp) | [`rs`](rs/01_mandelbrot.rs) | [`cs`](cs/01_mandelbrot.cs) | [`js`](js/01_mandelbrot.js) | [`ts`](ts/01_mandelbrot.ts) | [`go`](go/01_mandelbrot.go) | [`java`](java/01_mandelbrot.java) | [`kt`](kotlin/01_mandelbrot.kt) | [`swift`](swift/01_mandelbrot.swift) |
| 02 | raytrace_spheres | [`02_raytrace_spheres.png`](images/02_raytrace_spheres.png) | [`py`](py/02_raytrace_spheres.py) | [`cpp`](cpp/02_raytrace_spheres.cpp) | [`rs`](rs/02_raytrace_spheres.rs) | [`cs`](cs/02_raytrace_spheres.cs) | [`js`](js/02_raytrace_spheres.js) | [`ts`](ts/02_raytrace_spheres.ts) | [`go`](go/02_raytrace_spheres.go) | [`java`](java/02_raytrace_spheres.java) | [`kt`](kotlin/02_raytrace_spheres.kt) | [`swift`](swift/02_raytrace_spheres.swift) |
| 03 | julia_set | [`03_julia_set.png`](images/03_julia_set.png) | [`py`](py/03_julia_set.py) | [`cpp`](cpp/03_julia_set.cpp) | [`rs`](rs/03_julia_set.rs) | [`cs`](cs/03_julia_set.cs) | [`js`](js/03_julia_set.js) | [`ts`](ts/03_julia_set.ts) | [`go`](go/03_julia_set.go) | [`java`](java/03_julia_set.java) | [`kt`](kotlin/03_julia_set.kt) | [`swift`](swift/03_julia_set.swift) |
| 04 | orbit_trap_julia | [`04_orbit_trap_julia.png`](images/04_orbit_trap_julia.png) | [`py`](py/04_orbit_trap_julia.py) | [`cpp`](cpp/04_orbit_trap_julia.cpp) | [`rs`](rs/04_orbit_trap_julia.rs) | [`cs`](cs/04_orbit_trap_julia.cs) | [`js`](js/04_orbit_trap_julia.js) | [`ts`](ts/04_orbit_trap_julia.ts) | [`go`](go/04_orbit_trap_julia.go) | [`java`](java/04_orbit_trap_julia.java) | [`kt`](kotlin/04_orbit_trap_julia.kt) | [`swift`](swift/04_orbit_trap_julia.swift) |
| 05 | mandelbrot_zoom | [`05_mandelbrot_zoom.gif`](images/05_mandelbrot_zoom.gif) | [`py`](py/05_mandelbrot_zoom.py) | [`cpp`](cpp/05_mandelbrot_zoom.cpp) | [`rs`](rs/05_mandelbrot_zoom.rs) | [`cs`](cs/05_mandelbrot_zoom.cs) | [`js`](js/05_mandelbrot_zoom.js) | [`ts`](ts/05_mandelbrot_zoom.ts) | [`go`](go/05_mandelbrot_zoom.go) | [`java`](java/05_mandelbrot_zoom.java) | [`kt`](kotlin/05_mandelbrot_zoom.kt) | [`swift`](swift/05_mandelbrot_zoom.swift) |
| 06 | julia_parameter_sweep | [`06_julia_parameter_sweep.gif`](images/06_julia_parameter_sweep.gif) | [`py`](py/06_julia_parameter_sweep.py) | [`cpp`](cpp/06_julia_parameter_sweep.cpp) | [`rs`](rs/06_julia_parameter_sweep.rs) | [`cs`](cs/06_julia_parameter_sweep.cs) | [`js`](js/06_julia_parameter_sweep.js) | [`ts`](ts/06_julia_parameter_sweep.ts) | [`go`](go/06_julia_parameter_sweep.go) | [`java`](java/06_julia_parameter_sweep.java) | [`kt`](kotlin/06_julia_parameter_sweep.kt) | [`swift`](swift/06_julia_parameter_sweep.swift) |
| 07 | game_of_life_loop | [`07_game_of_life_loop.gif`](images/07_game_of_life_loop.gif) | [`py`](py/07_game_of_life_loop.py) | [`cpp`](cpp/07_game_of_life_loop.cpp) | [`rs`](rs/07_game_of_life_loop.rs) | [`cs`](cs/07_game_of_life_loop.cs) | [`js`](js/07_game_of_life_loop.js) | [`ts`](ts/07_game_of_life_loop.ts) | [`go`](go/07_game_of_life_loop.go) | [`java`](java/07_game_of_life_loop.java) | [`kt`](kotlin/07_game_of_life_loop.kt) | [`swift`](swift/07_game_of_life_loop.swift) |
| 08 | langtons_ant | [`08_langtons_ant.gif`](images/08_langtons_ant.gif) | [`py`](py/08_langtons_ant.py) | [`cpp`](cpp/08_langtons_ant.cpp) | [`rs`](rs/08_langtons_ant.rs) | [`cs`](cs/08_langtons_ant.cs) | [`js`](js/08_langtons_ant.js) | [`ts`](ts/08_langtons_ant.ts) | [`go`](go/08_langtons_ant.go) | [`java`](java/08_langtons_ant.java) | [`kt`](kotlin/08_langtons_ant.kt) | [`swift`](swift/08_langtons_ant.swift) |
| 09 | fire_simulation | [`09_fire_simulation.gif`](images/09_fire_simulation.gif) | [`py`](py/09_fire_simulation.py) | [`cpp`](cpp/09_fire_simulation.cpp) | [`rs`](rs/09_fire_simulation.rs) | [`cs`](cs/09_fire_simulation.cs) | [`js`](js/09_fire_simulation.js) | [`ts`](ts/09_fire_simulation.ts) | [`go`](go/09_fire_simulation.go) | [`java`](java/09_fire_simulation.java) | [`kt`](kotlin/09_fire_simulation.kt) | [`swift`](swift/09_fire_simulation.swift) |
| 10 | plasma_effect | [`10_plasma_effect.gif`](images/10_plasma_effect.gif) | [`py`](py/10_plasma_effect.py) | [`cpp`](cpp/10_plasma_effect.cpp) | [`rs`](rs/10_plasma_effect.rs) | [`cs`](cs/10_plasma_effect.cs) | [`js`](js/10_plasma_effect.js) | [`ts`](ts/10_plasma_effect.ts) | [`go`](go/10_plasma_effect.go) | [`java`](java/10_plasma_effect.java) | [`kt`](kotlin/10_plasma_effect.kt) | [`swift`](swift/10_plasma_effect.swift) |
| 11 | lissajous_particles | [`11_lissajous_particles.gif`](images/11_lissajous_particles.gif) | [`py`](py/11_lissajous_particles.py) | [`cpp`](cpp/11_lissajous_particles.cpp) | [`rs`](rs/11_lissajous_particles.rs) | [`cs`](cs/11_lissajous_particles.cs) | [`js`](js/11_lissajous_particles.js) | [`ts`](ts/11_lissajous_particles.ts) | [`go`](go/11_lissajous_particles.go) | [`java`](java/11_lissajous_particles.java) | [`kt`](kotlin/11_lissajous_particles.kt) | [`swift`](swift/11_lissajous_particles.swift) |
| 12 | sort_visualizer | [`12_sort_visualizer.gif`](images/12_sort_visualizer.gif) | [`py`](py/12_sort_visualizer.py) | [`cpp`](cpp/12_sort_visualizer.cpp) | [`rs`](rs/12_sort_visualizer.rs) | [`cs`](cs/12_sort_visualizer.cs) | [`js`](js/12_sort_visualizer.js) | [`ts`](ts/12_sort_visualizer.ts) | [`go`](go/12_sort_visualizer.go) | [`java`](java/12_sort_visualizer.java) | [`kt`](kotlin/12_sort_visualizer.kt) | [`swift`](swift/12_sort_visualizer.swift) |
| 13 | maze_generation_steps | [`13_maze_generation_steps.gif`](images/13_maze_generation_steps.gif) | [`py`](py/13_maze_generation_steps.py) | [`cpp`](cpp/13_maze_generation_steps.cpp) | [`rs`](rs/13_maze_generation_steps.rs) | [`cs`](cs/13_maze_generation_steps.cs) | [`js`](js/13_maze_generation_steps.js) | [`ts`](ts/13_maze_generation_steps.ts) | [`go`](go/13_maze_generation_steps.go) | [`java`](java/13_maze_generation_steps.java) | [`kt`](kotlin/13_maze_generation_steps.kt) | [`swift`](swift/13_maze_generation_steps.swift) |
| 14 | raymarching_light_cycle | [`14_raymarching_light_cycle.gif`](images/14_raymarching_light_cycle.gif) | [`py`](py/14_raymarching_light_cycle.py) | [`cpp`](cpp/14_raymarching_light_cycle.cpp) | [`rs`](rs/14_raymarching_light_cycle.rs) | [`cs`](cs/14_raymarching_light_cycle.cs) | [`js`](js/14_raymarching_light_cycle.js) | [`ts`](ts/14_raymarching_light_cycle.ts) | [`go`](go/14_raymarching_light_cycle.go) | [`java`](java/14_raymarching_light_cycle.java) | [`kt`](kotlin/14_raymarching_light_cycle.kt) | [`swift`](swift/14_raymarching_light_cycle.swift) |
| 15 | wave_interference_loop | [`15_wave_interference_loop.gif`](images/15_wave_interference_loop.gif) | [`py`](py/15_wave_interference_loop.py) | [`cpp`](cpp/15_wave_interference_loop.cpp) | [`rs`](rs/15_wave_interference_loop.rs) | [`cs`](cs/15_wave_interference_loop.cs) | [`js`](js/15_wave_interference_loop.js) | [`ts`](ts/15_wave_interference_loop.ts) | [`go`](go/15_wave_interference_loop.go) | [`java`](java/15_wave_interference_loop.java) | [`kt`](kotlin/15_wave_interference_loop.kt) | [`swift`](swift/15_wave_interference_loop.swift) |
| 16 | glass_sculpture_chaos | [`16_glass_sculpture_chaos.gif`](images/16_glass_sculpture_chaos.gif) | [`py`](py/16_glass_sculpture_chaos.py) | [`cpp`](cpp/16_glass_sculpture_chaos.cpp) | [`rs`](rs/16_glass_sculpture_chaos.rs) | [`cs`](cs/16_glass_sculpture_chaos.cs) | [`js`](js/16_glass_sculpture_chaos.js) | [`ts`](ts/16_glass_sculpture_chaos.ts) | [`go`](go/16_glass_sculpture_chaos.go) | [`java`](java/16_glass_sculpture_chaos.java) | [`kt`](kotlin/16_glass_sculpture_chaos.kt) | [`swift`](swift/16_glass_sculpture_chaos.swift) |
| 17 | monte_carlo_pi | - | [`py`](py/17_monte_carlo_pi.py) | [`cpp`](cpp/17_monte_carlo_pi.cpp) | [`rs`](rs/17_monte_carlo_pi.rs) | [`cs`](cs/17_monte_carlo_pi.cs) | [`js`](js/17_monte_carlo_pi.js) | [`ts`](ts/17_monte_carlo_pi.ts) | [`go`](go/17_monte_carlo_pi.go) | [`java`](java/17_monte_carlo_pi.java) | [`kt`](kotlin/17_monte_carlo_pi.kt) | [`swift`](swift/17_monte_carlo_pi.swift) |
| 18 | mini_language_interpreter | - | [`py`](py/18_mini_language_interpreter.py) | [`cpp`](cpp/18_mini_language_interpreter.cpp) | [`rs`](rs/18_mini_language_interpreter.rs) | [`cs`](cs/18_mini_language_interpreter.cs) | [`js`](js/18_mini_language_interpreter.js) | [`ts`](ts/18_mini_language_interpreter.ts) | [`go`](go/18_mini_language_interpreter.go) | [`java`](java/18_mini_language_interpreter.java) | [`kt`](kotlin/18_mini_language_interpreter.kt) | [`swift`](swift/18_mini_language_interpreter.swift) |

注記:
- `実行結果` が `-` の項目は、現時点で `sample/images/` に公開画像/GIF成果物を置いていないサンプルです。
- GitHub 上で `sample/` を開いたときに辿りやすいよう、パスベースで整理しています。

## サンプル運用ガイド

### 目的

`sample/` は、実用寄りの Python サンプルを各言語へトランスパイルし、実行結果と実行時間を比較するためのディレクトリです。

### ディレクトリ構成

- [`py/`](py): 変換元 Python サンプル（現在 `01`〜`18`）
- [`cpp/`](cpp): C++ 変換結果
- [`cs/`](cs): C# 変換結果
- [`rs/`](rs): Rust 変換結果
- [`js/`](js): JavaScript 変換結果
- [`ts/`](ts): TypeScript 変換結果
- [`go/`](go): Go 変換結果
- [`java/`](java): Java 変換結果
- [`swift/`](swift): Swift 変換結果
- [`kotlin/`](kotlin): Kotlin 変換結果
- [`ruby/`](ruby): Ruby 変換結果
- [`images/`](images): README 表示用の静的画像（Git 管理）
- `obj/`: 各言語のビルド生成物（Git 管理外）
- `out/`: 実行時の出力画像（PNG/GIF、Git 管理外）

### 計測条件（README 表の前提）

- Python: `PYTHONPATH=src python3 sample/py/<file>.py`
- PyPy: `PYTHONPATH=src pypy3 sample/py/<file>.py`
- C++: `g++ -std=c++20 -O3 -ffast-math -flto -I src ...`
- C#: `mcs ...` + `mono ...`
- Rust: `rustc -O ...`
- JavaScript: `node sample/js/<file>.js`
- TypeScript: `tsc ...` でコンパイル後 `node ...`
- Go: `go run` または `go build` 後に実行
- Java: `javac` + `java`
- Swift: `swiftc` でビルドした実行ファイル
- Kotlin: `kotlinc -include-runtime` でビルドした `jar`
- Ruby: `ruby --yjit sample/ruby/<file>.rb`（速度計測時。通常実行は `ruby sample/ruby/<file>.rb`）

注:
- `py2go.py` / `py2java.py` / `py2swift.py` / `py2kotlin.py` は現在 preview emitter 段階です。
- これら4言語は最小エントリ + 中間コードコメント形式のため、実行結果比較の対象外です。

### README 実行時間表の詳細

- `docs/ja/README.md` の表の値は 2026-02-26 時点で `sample/py` 18件を現行トランスパイラ出力で再計測した実測値です（小数第3位丸め）。
- 計測プロトコルは fresh transpile・`warmup=1`・`repeat=5`・`elapsed_sec` の中央値採用（コンパイル時間は除外）です。
- Ruby の速度計測は `ruby --yjit` を使用します。
- 最新計測では `>1.5x` の乖離はありません（18件すべて `<=1.5x`）。
- Go/Java/Swift/Kotlin は現行実装で JS sidecar bridge 経由で実行されるため、値は bridge 実行経路の計測値です。
- 出力整合性は `sample/py` 18件について `cpp/rs/cs/js/ts/go/java/swift/kotlin` 全言語で一致確認済みです（`tools/runtime_parity_check.py` の S3〜S7 検証ログ）。

### 実行時の注意

- `sample/py/` を Python のまま実行する場合は、`pylib` 解決のため `PYTHONPATH=src` を付けます。

```bash
PYTHONPATH=src python3 sample/py/01_mandelbrot.py
```

### テストコードとの関係

`test/` は小規模な機能確認ケース、`sample/` は実用寄り・負荷高めケースという役割分担です。

- [`../test/fixtures`](../test/fixtures): 変換元テストコード
- [`../test/unit`](../test/unit): ユニットテスト
- `../test/transpile/`: 変換生成物の作業ディレクトリ（Git 管理外）
  - GitHub 上では閲覧できません。必要な場合はローカルでトランスパイル実行して生成してください。

### 画像一致に関する補足

- `tools/verify_sample_outputs.py` は `sample/golden/manifest.json` を基準に、C++ 実行結果（`stdout` / 生成物）を照合します。
- 通常実行では Python を毎回実行せず、ゴールデン更新時だけ Python 実行を使います。
- 生成物は `suffix` / `size` / `sha256` で照合し、実質的にバイト列一致を確認します。

画像一致検証を自動実行する場合:

```bash
python3 tools/verify_sample_outputs.py --compile-flags="-O2"
```

- `stdout` 差分と、画像ファイル（`sha256` / `size` / `suffix`）差分をまとめて確認できます。
- ソース更新でゴールデンが古くなっている場合は `--refresh-golden` を促すエラーになります。

実行時間などの `stdout` 差分を無視して、画像一致のみ確認したい場合:

```bash
python3 tools/verify_sample_outputs.py --ignore-stdout --compile-flags="-O2"
```

ゴールデン基準を更新したい場合（Python 実行で再生成）:

```bash
python3 tools/verify_sample_outputs.py --refresh-golden --refresh-golden-only
```
